{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nexport function searchPhoto(searchImages) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '43587882-3fd012595c4df59010c013d1f';\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchImages,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n    return fetch(`${BASE_URL}?${params}`)\n        .then(response => {\n            if (!response.ok) {\n            throw new Error(response.status);\n            }\n            return response.json();\n  });\n}","export function createMarkup(arr) {\n    return arr.reduce(\n        (html, { webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n           return (html += `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"gallery-block\">\n                <p class=\"gallery-block__description\"><span>likes</span>${likes}</p>\n                <p class=\"gallery-block__description\"><span>views</span>${views}</p>\n                <p class=\"gallery-block__description\"><span>comments</span> ${comments}</p>\n                <p class=\"gallery-block__description\"><span>downloads</span>${downloads}</p>\n            </div>\n        </li>\n        `);\n        }, \"\");\n};\n","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchPhoto } from \"./js/pixabay-api\";\nimport { createMarkup } from './js/render-functions';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  sourceAttr: 'href',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nconst formSearch = document.querySelector('.js__search-form');\nconst list = document.querySelector('.js__list');\nconst loader = document.querySelector('.js__loader');\n\nformSearch.addEventListener('submit', onHandleSubmit);\nfunction onHandleSubmit(event) {\n    event.preventDefault();\n    const { picture } = event.currentTarget.elements;\n    const searchStr = picture.value.trim();\n    list.innerHTML = \"\";\n    loader.classList.remove('hide');\n  \n    if (!searchStr) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter details'\n        })\n      loader.classList.add('hide');\n        return;\n    }\n   \n    searchPhoto(picture.value)\n        .then(data => {\n          if (!data.hits.length) {  \n            iziToast.error({\n              title: 'Error',\n              message:\n                'Sorry, there are no images matching your search query. Please try again!',\n              position: 'bottomCenter',\n              transitionIn: 'bounceInUp',\n              messageColor: 'white',\n              timeout: 5000,\n            })\n          } \n          else {\n            setTimeout(() => {\n              list.insertAdjacentHTML(\n                'beforeend',\n                createMarkup(data.hits)\n              );\n              lightbox.refresh();\n            }, 1000)\n          }\n        })\n      \n        .catch(error => {\n          iziToast.error({\n            title: 'Error',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            position: 'bottomCenter',\n            transitionIn: 'bounceInUp',\n            messageColor: 'white',\n            timeout: 2000,\n          });\n            loader.classList.add('hide');\n      })\n      .finally(() => {\n        loader.classList.add('hide');  \n        formSearch.reset();\n        })\n  \n};\n\n\n"],"names":["searchPhoto","searchImages","BASE_URL","API_KEY","params","response","createMarkup","arr","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","formSearch","list","loader","onHandleSubmit","event","picture","searchStr","iziToast","data","error"],"mappings":"6vBACO,SAASA,EAAYC,EAAc,CACxC,MAAMC,EAAW,2BACXC,EAAU,qCAEVC,EAAS,IAAI,gBAAgB,CACjC,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAEC,OAAO,MAAM,GAAGC,CAAQ,IAAIE,CAAM,EAAE,EAC/B,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACd,MAAM,IAAI,MAAMA,EAAS,MAAM,EAE/B,OAAOA,EAAS,MAC5B,CAAG,CACH,CCpBO,SAASC,EAAaC,EAAK,CAC9B,OAAOA,EAAI,OACP,CAACC,EAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KACzDP,GAAQ;AAAA;AAAA,4CAEiBE,CAAa;AAAA,gDACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,0EAGAC,CAAK;AAAA,0EACLC,CAAK;AAAA,8EACDC,CAAQ;AAAA,8EACRC,CAAS;AAAA;AAAA;AAAA,UAI5E,EAAE,CACb,CCPA,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,WAAY,OACZ,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAED,MAAMC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAO,SAAS,cAAc,WAAW,EACzCC,EAAS,SAAS,cAAc,aAAa,EAEnDF,EAAW,iBAAiB,SAAUG,CAAc,EACpD,SAASA,EAAeC,EAAO,CAC3BA,EAAM,eAAc,EACpB,KAAM,CAAE,QAAAC,CAAS,EAAGD,EAAM,cAAc,SAClCE,EAAYD,EAAQ,MAAM,KAAI,EAIpC,GAHAJ,EAAK,UAAY,GACjBC,EAAO,UAAU,OAAO,MAAM,EAE1B,CAACI,EAAW,CACZC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,sBACrB,CAAS,EACHL,EAAO,UAAU,IAAI,MAAM,EACzB,MACH,CAEDpB,EAAYuB,EAAQ,KAAK,EACpB,KAAKG,GAAQ,CACPA,EAAK,KAAK,OAYb,WAAW,IAAM,CACfP,EAAK,mBACH,YACAb,EAAaoB,EAAK,IAAI,CACtC,EACcV,EAAS,QAAO,CACjB,EAAE,GAAI,EAjBPS,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,eACV,aAAc,aACd,aAAc,QACd,QAAS,GACvB,CAAa,CAWb,CAAS,EAEA,MAAME,GAAS,CACdF,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,eACV,aAAc,aACd,aAAc,QACd,QAAS,GACrB,CAAW,EACCL,EAAO,UAAU,IAAI,MAAM,CACvC,CAAO,EACA,QAAQ,IAAM,CACbA,EAAO,UAAU,IAAI,MAAM,EAC3BF,EAAW,MAAK,CACxB,CAAS,CAET"}